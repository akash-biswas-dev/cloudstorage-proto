
syntax = "proto3";

package cloudstorage.v1;

import "cloudstorage/v1/types/v1/files.proto";

service CloudStorageObjectControlService{

  rpc UpdateAccessType(UpdateAccessTypeRequest) returns(UpdateAccessTypeResponse);

  rpc DeleteObject(DeleteObjectRequest) returns (DeleteObjectResponse);

  rpc GetDirectoryContent(GetDirectoryContentRequest) returns (stream GetDirectoryContentResponse);

  rpc IsObjectExists(IsObjectExistsRequest) returns (IsObjectExistsResponse);

  rpc FindObjectsByName(FindObjectsByNameRequest) returns (stream FindObjectsByNameResponse);

}


message DeleteObjectRequest {
  repeated string object_id = 1;
}
message DeleteObjectResponse {
  repeated string object_id = 1;
}

message UpdateAccessTypeRequest {
  repeated cloudstorage.v1.types.v1.ObjectAccessInfo object_access_info = 1;
}

message UpdateAccessTypeResponse {
  repeated cloudstorage.v1.types.v1.ObjectAccessInfo object_access_info = 1;
}

message GetDirectoryContentRequest{
  string object_id = 1; // If the object id a valid directory name then only otherwise return error.
  cloudstorage.v1.types.v1.AccessType access_type = 2;
  cloudstorage.v1.types.v1.ObjectType object_type = 3;
}

message GetDirectoryContentResponse{
  cloudstorage.v1.types.v1.ObjectDetails objects = 1;
}

message IsObjectExistsRequest {
  string object_id = 1;
}
message IsObjectExistsResponse{
  optional cloudstorage.v1.types.v1.ObjectDetails object = 1;
}

message FindObjectsByNameRequest{
 string object_name = 1; // Name refers here the directory name or file name.
}

message FindObjectsByNameResponse{
  cloudstorage.v1.types.v1.ObjectDetails objects = 1;
}
