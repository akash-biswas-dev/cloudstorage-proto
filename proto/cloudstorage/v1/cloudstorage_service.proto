syntax = "proto3";

package cloudstorage.v1;

import "cloudstorage/v1/types/v1/files.proto";

service CloudStorageService {
  // Update the access type of the object PUBLIC/PRIVATE.
  rpc UpdateAccessType(UpdateAccessTypeRequest) returns (UpdateAccessTypeResponse);

  // Delete an object.
  rpc DeleteObject(DeleteObjectRequest) returns (DeleteObjectResponse);

  // Returns all the directories and files in a directory by id.
  rpc GetDirectoryContent(GetDirectoryContentRequest) returns (stream GetDirectoryContentResponse);

  // Find an object by id. The id looks like
  // "demo.txt"
  // "music/favorite.mp3"
  //
  // So here music is the directory id. and the file id is "music/favorite.mp3".

  rpc IsObjectExists(IsObjectExistsRequest) returns (IsObjectExistsResponse);

  // Find all objects by name like if search with lets say "Music".
  // Then it returns all the directories and files that have "Music" in their name ignore case.

  rpc FindObjectsByName(FindObjectsByNameRequest) returns (stream FindObjectsByNameResponse);
}

message DeleteObjectRequest {
  repeated string object_id = 1;
}
message DeleteObjectResponse {
  repeated string object_id = 1;
}

message UpdateAccessTypeRequest {
  repeated cloudstorage.v1.types.v1.ObjectAccessInfo object_access_info = 1;
}

message UpdateAccessTypeResponse {
  repeated cloudstorage.v1.types.v1.ObjectAccessInfo object_access_info = 1;
}

message GetDirectoryContentRequest {
  string object_id = 1; // If the object id a valid directory name then only otherwise return error.
  cloudstorage.v1.types.v1.AccessType access_type = 2;
  cloudstorage.v1.types.v1.ObjectType object_type = 3;
}

message GetDirectoryContentResponse {
  cloudstorage.v1.types.v1.ObjectDetails objects = 1;
}

message IsObjectExistsRequest {
  string object_id = 1;
}
message IsObjectExistsResponse {
  optional cloudstorage.v1.types.v1.ObjectDetails object = 1;
}

message FindObjectsByNameRequest {
  // Name refers here the directory name or file name.
  string object_name = 1; 
}

message FindObjectsByNameResponse {
  cloudstorage.v1.types.v1.ObjectDetails objects = 1;
}
