syntax = "proto3";

package cloudstorage.v1;

import "cloudstorage/v1/types/v1/files.proto";

// This service is only to used to send and recive the raw data bytes.
service FileService {

  rpc SaveFile(stream SaveFileRequest) returns (SaveFileResponse);

  rpc GetFile(GetFileRequest) returns (stream GetFileResponse);

  rpc UpdateFile(stream UpdateFileRequest) returns (UpdateFileResponse);
}

// Status represents the status of an operation.
enum Status {
  STATUS_UNSPECIFIED = 0;
  STATUS_FAILED = 1;
  STATUS_SUCCESS = 2;
}

// Stream of bytes of the file.
message SaveFileRequest {
  bytes data = 1;
}

// After sending the bytes either getting the object response or the error message from the server.
message SaveFileResponse {
  oneof response {
    string error_message = 2;
    cloudstorage.v1.types.v1.ObjectDetails object_details = 3;
  }
}

// Object id is like the file id, this id must be a file path not a directory or invalid file name.
message GetFileRequest {
  string object_id = 1;
}

// The stream of bytes of the file.
message GetFileResponse {
  bytes data = 1;
}

// The new file bytes.
message UpdateFileRequest {
  bytes data = 1;
}

// Either the operation is successful or getting the error message from the server.
message UpdateFileResponse {
  oneof response {
    string error_message = 2;
    cloudstorage.v1.types.v1.ObjectDetails object_details = 3;
  }
}
