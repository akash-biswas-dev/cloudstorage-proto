syntax = "proto3";

import "cloudstorage/v1/types.proto";

package cloudstorage.v1;

service CloudStorageService {
  rpc UploadFile(stream UploadFileRequest) returns (UploadFileResponse);

  rpc DownloadFile(DownloadFileRequest) returns (stream DownloadFileResponse);

  rpc DeleteFile(DeleteFileRequest) returns (DeleteFileResponse);

  rpc ChangeVisibility(ChangeVisibilityRequest) returns (ChangeVisibilityResponse);

  rpc CreateStaticDirectory(CreateStaticDirectoryRequest) returns (CreateStaticDirectoryResponse);

}

message UploadFileRequest {
  bytes data = 1;
}

enum Status {
  STATUS_UNSPECIFIED = 0;
  STATUS_FAILED = 1;
  STATUS_SUCCESS = 2;
}

message UploadFileResponse {
  Status status = 1;
  oneof response {
    string error_message = 2;
    cloudstorage.v1.FileDetails file_details = 3;
  }
}

message DownloadFileRequest {
  string file_id= 1;
}

message DownloadFileResponse {
  bytes data = 1;
}

message DeleteFileRequest{
  repeated string file_ids = 1;
}
message DeleteFileResponse{
  repeated string file_ids = 1;
}

message ChangeVisibilityRequest{
  repeated cloudstorage.v1.FileIdWithVisibility file_visibility = 1;
}

message ChangeVisibilityResponse{
  repeated cloudstorage.v1.FileIdWithVisibility file_visibility = 1;
}

message CreateStaticDirectoryRequest {
  string directory_id = 1;
}
message CreateStaticDirectoryResponse{
  string directory_id = 1;
}
